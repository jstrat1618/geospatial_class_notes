facet_wrap(~month)
qmplot(lon, lat, color = bedrooms, geom = 'point',  data = sales)+
facet_wrap(~month)
data("ward_sales")
head(ward_sales)
head(ward_sales) #This is polygon data data
# Add a point layer with color mapped to ward
ggplot(ward_sales, aes(lon, lat)) +
geom_point(aes(color = ward))
# Add a point layer with color mapped to ward
ggplot(ward_sales, aes(lon, lat)) +
geom_point(aes(color = group))
ggplot(ward_sales, aes(lon, lat))+
geom_path(aes(group = group))
# Add a polygon layer with fill mapped to ward, and group to group
ggplot(ward_sales, aes(lon, lat))+
geom_polygon(aes(fill = ward, group = group))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales,
aes(lon, lat))) +
geom_polygon(aes(group = group, fill = ward))
# Fix the polygon cropping
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = ward))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = num_sales))
# Repeat again, but map fill to avg_price
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price, alpha = 0.8))
?geom_polygon
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price, alpha = 0.8))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price, alpha = 0.5))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price, alpha = 0.05))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price, alpha = 0.95))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price, alpha = 0.8))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price, alpha = 0.8))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price, alpha = 0.5))
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price), alpha = 0.8
# Repeat again, but map fill to avg_price
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price), alpha = 0.8)
head(preds)
data("preds")
head(preds)
data("ward_sales")
data("preds")
head(preds)
# Add a geom_point() layer
ggplot(preds, aes(lon, lat))+
geom_point()
# Add a tile layer with fill mapped to predicted_price
ggplot(preds, aes(lon, lat))+
geom_point()
# Add a tile layer with fill mapped to predicted_price
ggplot(preds, aes(lon, lat))+
geom_layer(aes(fill = predicted_price))
# Add a tile layer with fill mapped to predicted_price
ggplot(preds, aes(lon, lat))+
geom_tile(aes(fill = predicted_price))
ggmap(corvallis_map_bw)+
geom_tile(aes(lat, lon), alpha =0.8, data = sales)
ggmap(corvallis_map_bw)+
geom_tile(aes(lat, lon, fill = predicted_price), alpha =0.8, data = sales)
#
ggmap(corvallis_map_bw)+
geom_tile(aes(lat, lon, fill = predicted_price), alpha =0.8, data = preds)
ggmap(preds, aes(lon, lat))+
geom_tile(aes(fill = predicted_price))
ggmap(corvallis_map_bw)+
geom_tile(aes(lat, lon, fill = predicted_price), alpha =0.8, data = sales)
ggmap(corvallis_map_bw)+
geom_tile(aes(lat, lon), alpha =0.8, data = sales)
library(geospatial)
data(sales)
head(sales)
data("preds")
head(preds)
library(geospatial)
data(sales)
head(sales)
library(ggplot2)
#Ploting (lons, lats) doesn't really look all that great because they are  missing terriain
ggplot(sales, aes(lon, lat))+
geom_point()#Not that great of a plot
#Instead we will use the ggmap package
library(ggmap)
#Get a map of NYC
nyc <- c(lon = -74.0059, lat = 40.7128)
#Download the relevant map
nyc_map <- get_map(location = nyc, zoom = 10)
ggmap(nyc_map, extent = "normal")
#Excercise
corvallis <- c(lon = -123.2620, lat = 44.5646)
# Get map at zoom level 5: map_5
map_5 <- get_map(corvallis, zoom = 5, scale = 1)
# Plot map at zoom level 5
ggmap(map_5)
# Get map at zoom level 13: corvallis_map
corvallis_map <- get_map(corvallis, zoom = 13, scale = 1)
# Plot map at zoom level 13
ggmap(corvallis_map)
#NEXT Excercise
# Look at head() of sales
head(sales)
# Swap out call to ggplot() with call to ggmap()
# Look at head() of sales
head(sales)
# Swap out call to ggplot() with call to ggmap()
ggmap(corvallis_map) +
geom_point(aes(lon, lat), data = sales)
#Next Excercise
# Map color to year_built
ggmap(corvallis_map) +
geom_point(aes(lon, lat, color = year_built), data = sales)
# Map size to bedrooms
ggmap(corvallis_map) +
geom_point(aes(lon, lat, size = bedrooms ), data = sales)
# Map color to price / finished_squarefeet
ggmap(corvallis_map) +
geom_point(aes(lon, lat, color = price / finished_squarefeet), data = sales)
#There are a variety of map types, you can see them in ?get_map under map type
#Note that certain map types come from certain sources. And no one sources provides all types.
#Google: "terrain", "terrain-background", "satellite", "roadmap", "hybrid"
#"stamen: "terrain", "toner", "watercolor", "terrain-labels", "terrain-lines","toner-2010", "toner-2011", "toner-background", "toner-hybrid","toner-labels", "toner-lines", "toner-lite"
#osm: stands for "Open Street Map" and  only has 1 map type and does need a type specified
#NEXT EXCERCISE
corvallis <- c(lon = -123.2620, lat = 44.5646)
# Add a maptype argument to get a satellite map
corvallis_map_sat <- get_map(corvallis, zoom = 13, maptype = 'satellite')
# Edit to display satellite map
ggmap(corvallis_map_sat) +
geom_point(aes(lon, lat, color = year_built), data = sales)
# Add source and maptype to get toner map from Stamen Maps
corvallis_map_bw <- get_map(corvallis, zoom = 13, source = 'stamen', maptype = 'toner')
# Edit to display toner map
ggmap(corvallis_map_bw) +
geom_point(aes(lon, lat, color = year_built), data = sales)
## Use base_layer argument to ggmap() to specify data and x, y mappings
ggmap(corvallis_map_bw,
base_layer = ggplot(sales, aes(lon, lat)))+
geom_point(aes(color = year_built))
# Use base_layer argument to ggmap() and add facet_wrap()
ggmap(corvallis_map_bw,
base_layer = ggplot(sales, aes(lon, lat)))+
facet_wrap(~class)+
geom_point(aes(color = class))
#Next excercise
# Plot house sales using qmplot()
qmplot(lon, lat, color = bedrooms, geom = 'point',  data = sales)+
facet_wrap(~month)
#New data set
data("ward_sales")
head(ward_sales) #This is polygon data data
#Note the summary data (num_sales, avg_price, avg_finished_squarefeet) is repeated for points within the polygon
# Add a point layer with color mapped to ward
ggplot(ward_sales, aes(lon, lat)) +
geom_point(aes(color = ward))
# Add a point layer with color mapped to group
ggplot(ward_sales, aes(lon, lat))+
geom_point(aes(color = group))
# Add a path layer with group mapped to group
ggplot(ward_sales, aes(lon, lat))+
geom_path(aes(group = group))
# Add a polygon layer with fill mapped to ward, and group to group
ggplot(ward_sales, aes(lon, lat))+
geom_polygon(aes(fill = ward, group = group))
#Mapping the wards on top of the corvalis map- the WRONG WAY
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales,
aes(lon, lat))) +
geom_polygon(aes(group = group, fill = ward))
#Uh oh, things don't look right. Wards 1, 3 and 8 look jaggardy and wrong. What's happened? Part of the ward boundaries are beyond the map boundary. Due to the default settings in ggmap(), any data off the map is dropped before plotting, so some polygon boundaries are dropped and when the remaining points are joined up you get the wrong shapes.
#Don't worry, there is a solution: ggmap() provides some arguments to control this behaviour. Arguments extent = "normal" along with maprange = FALSE force the plot to use the data range rather than the map range to define the plotting boundaries.
#Next excercise
# Fix the polygon cropping
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = ward))
# Repeat, but map fill to num_sales
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = num_sales))
# Repeat again, but map fill to avg_price
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price), alpha = 0.8)
#New data set
data("preds")
head(preds)
# Add a geom_point() layer
ggplot(preds, aes(lon, lat))+
geom_point()
# Add a tile layer with fill mapped to predicted_price
ggplot(preds, aes(lon, lat))+
geom_tile(aes(fill = predicted_price))
?aes
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(aes(fill = predicted_price), alpha =0.8, data = preds)
ggmap(corvallis_map_bw)+
geom_tile(aes(fill = predicted_price,  alpha =0.8, data = preds))
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(aes(fill = predicted_price), data = preds)
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(aes(fill = predicted_price), data = preds)
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(aes(fill = predicted_price), data = preds)
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(aes(fill = predicted_price), alpha = 0.8, data = preds)
ggmap(corvallis_map_bw)+
geom_tile(aes(fill = predicted_price), alpha = 0.8, data = preds)
?aes
?ggmap
ggmap(corvallis_map_bw)+
geom_tile()
library(raster)
install.packages('raster')
library(raster)
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(aes())
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(mapping = aes(fill = predicted_price), alpha = 0.8, data = sales)
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(mapping = aes(fill = predicted_price), alpha = 0.8, data = preds)
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(mapping = aes(fill = predicted_price),  data = preds)
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(mapping = aes(fill = predicted_price, alpha = 0.8),  data = preds)
head(preds)
# Use ggmap() instead of ggplot()
ggmap(corvallis_map_bw)+
geom_tile(mapping = aes(x = lon, y = lat, fill = predicted_price, alpha = 0.8),
data = preds)
25*12
29*12
4*12
library(sp)
data("countries_sp")
print(countries_sp)
summary(countries_sp)
plot(countries_sp)
class(countries_sp)
countries_sp$`0`
countries_sp[0]
countries_sp[1]
countries_sp[3]
coordinates(countries_sp)
str(countries_sp)
str(countries_sp, max.level = 2)
summary(countries_sp)
countries_sp@plotOrder
data("countries_spdf")
summary(countries_spdf)
str(countries_sp, max.level = 2)
str(countries_spdf, max.level = 2)
plot(countries_spdf)
ggmap(corvallis_map_bw,
base_layer = ggplot(ward_sales, aes(lon, lat)),
extent = "normal", maprange = FALSE) +
geom_polygon(aes(group = group, fill = avg_price), alpha = 0.8)
plot(countries_spdf)
library(sp)
data("countries_sp")
print(countries_sp)
library(geospatial)
data("countries_sp")
print(countries_sp)
summary(countries_sp)
plot(countries_sp)
countries_sp@bbox
slot(countries_sp, "bbox")
str(countries_spdf@polygons, max.level = 2)
str(countries_spdf@polygons, max.level = 2)[[1]]
str(countries_spdf@polygons, max.level = 2)[1]
countries_spdf@polygons[[169]]
countries_spdf@polygons[[169]]
countries_spdf@polygons[[169]]
one <- countries_spdf@polygons[[169]]
print(one)
summary(one)
str(one, max.level = 2)
one <- countries_spdf@polygons[[169]]
str(one, max.level = 2)
str(one@Polygons, max.level = 2)
one@Polygons[[6]]
one@Polygons[1]
one@Polygons[[1]]
one@Polygons[[6]]
str(one@Polygons[[6]], max.level = 2)
plot(one@Polygons[[6]])
one@Polygons[[6]]
one@Polygons[[6]]@coords
plot(one@Polygons[[6]]@coords)
str(one, max.level = 2)
one <- countries_spdf@polygons[[169]]
str(one@Polygons, max.level = 2)
str(one@Polygons[[6]], max.level = 2)
str(one@Polygons, max.level = 2)
str(one@Polygons, max.level = 2)
str(one@Polygons[[6]], max.level = 2)
plot(one@Polygons[[6]]@coords)
library(sp)
data("countries_sp")
library(geospatial)
data("countries_sp")
data("countries_spdf")
plot(one@Polygons[[6]]@coords)
one <- countries_spdf@polygons[[169]]
plot(one@Polygons[[6]]@coords)
countries_spdf[1, ]
usa <- countries_spdf[169, ]
plot(usa)
plot(usa@data)
usa@data
usa <- countries_spdf[169, ]
summary(usa)
summary(usa)
str(usa, max.level = 2)
str(usa, max.level = 2)
data("iris")
iris[["Species"]]
head(countries_spdf@data)
countries_spdf$name
str(countries_spdf@data)
countries_spdf$name
countries_spdf[['subregion']]
head(countries_spdf@data)
nz <- countries_spdf[is_nz,]
plot(nz)
nz <- countries_spdf[is_nz,]
is_nz <- countries_spdf$name == 'New Zealand'
nz <- countries_spdf[is_nz,]
plot(nz)
library(tmap)
library(tmap)
install.packages("tmap")
library(tmap)
install.packages('tmaptools')
install.packages('rgdal')
sessionInfo()
sessionInfo()
library(ggplot)
library(ggplot2)
install.packages('ggplot2')
library(ggplot2)
x <- 1:4
y <- x^2
qplot(x, y)
x <- 1:5
y <- x^2
plot(x,y)
library(ggplot2)
qplot(x,y)
?qplot
install.packages('dplyr')
library(dplyr)
install.packages('rgdal')
library(rgdal)
install.packages('sp')
library(sp)
library(rgdal)
install.packages('rgdal')
install.packages('ggmap')
install.packages('ggthemes')
install.packages('ElemStatLearn')
install.packages("ISLR")
install.packages('tm')
install.packages('tmap')
library(sp)
library(geospatial)
library(tmap)
data("countries_sp")
qtm(shp = countries_spdf, fill = "population")
qtm(shp = countries_spdf, fill = "gdp")
countries_spdf@data
head(countries_spdf@data)
data('Europe')
tm_shape(Europe)+ #Specfifies the data without displaying it (like ggplot function)
tm_borders() #Add layer to draw borders of each country
head(Europe@data)
tm_shape(Europe)+ #Specfifies the data without displaying it (like ggplot function)
tm_borders()+ #Add layer to draw borders of each country
tm_fill(col = 'part')+ #
tm_compass()+
tmap_style('cobalt')
tm_shape(Europe)+ #Specfifies the data without displaying it (like ggplot function)
tm_borders()+ #Add layer to draw borders of each country
tm_fill(col = 'part')+ #Unlike ggplot2 variables are referenced in quotes
tm_compass()
tm_shape(Europe)+ #Specfifies the data without displaying it (like ggplot function)
tm_borders()+ #Add layer to draw borders of each country
tm_fill(col = 'part')+ #Unlike ggplot2 variables are referenced in quotes
tm_compass()+ #Non-data variables - just adds a compass
tmap_style('cobalt')
colnames(Europe@data)
tm_shape(Europe)+ #Specfifies the data without displaying it (like ggplot function)
tm_borders()+ #Add layer to draw borders of each country
tm_fill(col = 'gdp_cap_est')+ #Unlike ggplot2 variables are referenced in quotes
tm_compass()+ #Non-data variables - just adds a compass
tmap_style('cobalt')
tm_shape(Europe)+ #Specfifies the data without displaying it (like ggplot function)
tm_borders()+ #Add layer to draw borders of each country
tm_fill(col = 'gdp_cap_est')+ #Unlike ggplot2 variables are referenced in quotes
tm_compass()
tm_shape(countries_spdf) +
tm_fill(col = "population")
tm_shape(countries_spdf) +
tm_fill(col = "population", style = 'quantile')
#NEXT EXCERCISE
# Add style argument to the tm_fill() call
tm_shape(countries_spdf) +
tm_fill(col = "population", style = 'quantile') +
# Add a tm_borders() layer
tm_borders(col = 'burlywood4')
tm_shape(countries_spdf) +
tm_bubbles(size  = "population", style = 'quantile') +
# Add a tm_borders() layer
tm_borders(col = 'burlywood4')
# New plot, with tm_bubbles() instead of tm_fill()
tm_shape(countries_spdf) +
tm_bubbles(size  = "population") +
# Add a tm_borders() layer
tm_borders(col = 'burlywood4')
tm_shape(countries_spdf) +
tm_fill(col = "population", style = 'quantile') +
# Add a tm_borders() layer
tm_borders(col = 'burlywood4')
# Switch to a Hobo–Dyer projection
tm_shape(countries_spdf, projection = 'hd') +
tm_grid(n.x = 11, n.y = 11) +
tm_fill(col = "population", style = "quantile")  +
tm_borders(col = "burlywood4")
# Switch to a Robinson projection
tm_shape(countries_spdf, projection = 'robin') +
tm_grid(n.x = 11, n.y = 11) +
tm_fill(col = "population", style = "quantile")  +
tm_borders(col = "burlywood4")
tm_shape(countries_spdf, projection = 'hd') +
tm_grid(n.x = 11, n.y = 11) +
tm_fill(col = "population", style = "quantile")  +
tm_borders(col = "burlywood4")
# Switch to a Robinson projection
tm_shape(countries_spdf, projection = 'robin') +
tm_grid(n.x = 11, n.y = 11) +
tm_fill(col = "population", style = "quantile")  +
tm_borders(col = "burlywood4")
# Add tm_style_classic() to your plot
tm_shape(countries_spdf, projection = 'robin') +
tm_grid(n.x = 11, n.y = 11) +
tm_fill(col = "population", style = "quantile")  +
tm_borders(col = "burlywood4") +
tm_style_classic()
tm_shape(countries_spdf) +
tm_grid(n.x = 11, n.y = 11, projection = "longlat") +
tm_fill(col = "population", style = "quantile")  +
tm_borders(col = "burlywood4")
save_tmap(filename = 'population.png')
save_tmap("population.html")
tm_shape(countries_spdf) +
tm_grid(n.x = 11, n.y = 11, projection = "longlat") +
tm_fill(col = "population", style = "quantile")  +
tm_borders(col = "burlywood4")
save_tmap("population.html")
save_tmap(filename = "population.html")
